<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This week on Perl 6, week ending 2004-01-11 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" It&#39;s Monday. People have been talking about Perl 6, Parrot and the European Union Constitution. Let&#39;s find out what they&#39;ve been saying about Parrot first shall we? Threads Threads were discussed some more. Dan&#39;s deadline is coming up soon,..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2004/01/p6pdigest/20040111.html/" />
<meta property="og:title" content="This week on Perl 6, week ending 2004-01-11" />
<meta property="og:description" content=" It&#39;s Monday. People have been talking about Perl 6, Parrot and the European Union Constitution. Let&#39;s find out what they&#39;ve been saying about Parrot first shall we? Threads Threads were discussed some more. Dan&#39;s deadline is coming up soon,...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2004-01-01T01:01:01Z" />
<meta property="og:image" content="http://localhost:1313/images/author/piers-cawley.jpg" />
<meta property="og:article:tag" content="perl-6-internals-parrot" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This week on Perl 6, week ending 2004-01-11</h1>
              <p class="blog-post-meta">Jan 11, 2004 by
              
              
                
                
                <a href="#author-bio-piers-cawley">Piers Cawley</a>
              
              </p>
              <img alt="" src=""/>
                

<p>It&rsquo;s Monday. People have been talking about Perl 6, Parrot and the European Union Constitution. Let&rsquo;s find out what they&rsquo;ve been saying about Parrot first shall we?</p>

<h4 id="span-id-threads-threads-span"><span id="Threads">Threads</span></h4>

<p>Threads were discussed some more. Dan&rsquo;s deadline is coming up soon, hopefully soon after that discussion will move from Holy Skirmishes about architecture and on to meaningful discussions of a real implementation.</p>

<p>Hmm&hellip; that came out rather more dismissive than I intended.</p>

<h4 id="span-id-continuation-problems-continuation-problems-span"><span id="Continuation_problems">Continuation problems</span></h4>

<p>Luke Palmer found a problem with Parrot&rsquo;s continuations. A continuation is supposed to encapsulate the interpreter&rsquo;s control state, in other words the position of the program counter and the state of the register stacks, and a pointer to the previous continuation. However, it turns out that a Parrot continuation just contains the program counter and a pointer to the previous continuation. There was some discussion of why this was so (Melvin Smith seemed to claim that it was both his fault and not his fault).</p>

<p>Everyone agreed that this needed to be fixed pretty promptly and it wasn&rsquo;t long before Luke posted a patch.</p>

<p><a href="http://groups.google.com/groups?selm=20040106145324.GA12805@babylonia.flatirons.org">http://groups.google.com</a></p>

<p><a href="http://groups.google.com/groups?selm=20040108031029.GA19161@babylonia.flatirons.org">http://groups.google.com</a></p>

<h4 id="span-id-a-problem-with-threads-a-problem-with-threads-span"><span id="A_problem_with_threads">A problem with threads</span></h4>

<p>In a change from the discussions of thread philosophy, Jeff Clites posted about a problem he was having with Parrot&rsquo;s current threads implementation which was causing problems when trying to join multiple threads. Between them, Jeff and Leo Tötsch tracked down a possible cause of the problem and Jeff offered up a patch which Leo applied.</p>

<p><a href="http://groups.google.com/groups?selm=B8972372-3F66-11D8-A5EA-000393A6B9DA@mac.com">http://groups.google.com</a></p>

<h4 id="span-id-the-ppc-jit-gets-fixed-the-ppc-jit-gets-fixed-span"><span id="The_PPC_JIT_gets_fixed">The PPC JIT gets fixed</span></h4>

<p>Jeff Clites also posted a patch which cleans up the last problems with the JIT on PPC. Leo applied it. Us Apple users cheered.</p>

<p><a href="http://groups.google.com/groups?selm=200401061713.i06HDgZ14086@thu8.leo.home">http://groups.google.com</a></p>

<h4 id="span-id-luke-palmer-gets-his-act-together-luke-palmer-gets-his-act-together-span"><span id="Luke_Palmer_gets_his_act_together">Luke Palmer gets his act together</span></h4>

<p>Luke Palmer decided to get his act together (given the level of his contribution to the Perl 6 lists so far, I&rsquo;m almost scared to find out what he&rsquo;s going to be like now&hellip;) and finish up his &lsquo;Priority DOD&rsquo; rethink of the Garbage Collector. I confess I&rsquo;m not really qualified to discuss what&rsquo;s different about it, beyond the claim of a 10,000% speed up when there were no &lsquo;eager&rsquo; PMCs about (things that need immediate cleanup on scope exit; the canonical example being a Perlish file handle) and only a 5% slowdown when there were.</p>

<p>Luke and Leo discussed the patch a bit before Leo applied it.</p>

<p><a href="http://groups.google.com/groups?selm=20040105134753.GA2215@babylonia.flatirons.org">http://groups.google.com</a></p>

<p><a href="http://groups.google.com/groups?selm=20040105192430.GA32476@babylonia.flatirons.org">http://groups.google.com</a> &ndash; Luke explains the patch</p>

<h4 id="span-id-imcc-speed-issues-imcc-speed-issues-span"><span id="IMCC_speed_issues">IMCC speed issues</span></h4>

<p>Dan posted some timings he&rsquo;d made of IMCC compiling some large subs, which were not the most wonderful timings I&rsquo;ve ever seen. A 41 minute compile isn&rsquo;t generally what one wishes to see. Melvin Smith had a few ideas about what was causing it, as did Leo (it seems that IMCC&rsquo;s register allocation is very slow in the presence of spilling and Live analysis increases with the product of the number of lines and variables in a segment. Leo recommended redoing the sub to reduce the number of (and avoid long lived) PIR variables (ie. registers) by using lexicals or globals instead.</p>

<p><a href="http://groups.google.com/groups?selm=a0601020fbc1f2406c38a@%5B10.0.1.2%5D">http://groups.google.com/</a></p>

<h4 id="span-id-references-to-hash-elements-references-to-hash-elements-span"><span id="References_to_hash_elements">References to hash elements</span></h4>

<p>Arthur &ldquo;Ponie&rdquo; Bergman had some questions about how references to hash elements would be done. Consider the following Perl code:</p>

<pre><code>   my %hash;
   $foo = \$hash{key};

   $$foo = &quot;bar&quot;;

   print $hash{key}; # Prints &quot;bar&quot;
</code></pre>

<p>Arthur wondered how this could be made to work with the current vtable setup, specifically in the presence of tying. Simon Cozens thought that there should be a special HashElement PMC which would handle fetching the actual value from the hash (or writing it back to the hash) as appropriate. Dan agreed with him, so it looks like this might be the way forward.</p>

<p><a href="http://groups.google.com/groups?selm=E8338D24-4068-11D8-896A-000A95A2734C@nanisky.com">http://groups.google.com</a></p>

<h4 id="span-id-instantiation-instantiation-span"><span id="Instantiation?">Instantiation?</span></h4>

<p>Michal Wallace asked how to instantiate objects from Parrot. Luke Palmer supplied the answer, but pointed out that, at present, classes can only have integer attributes. It turns out that, for Michal&rsquo;s purposes, he can probably get by with using properties instead, so that&rsquo;s all right.</p>

<p>Stéphane Payrard did the decent thing and implemented the other attribute types. He even wrote tests.</p>

<p><a href="http://groups.google.com/groups?selm=Pine.LNX.4.58.0401071857360.13262@hydrogen.sabren.com">http://groups.google.com</a></p>

<p><a href="http://groups.google.com/groups?selm=20040110212248.GA12650@stefp.dyndns.org">http://groups.google.com</a></p>

<h4 id="span-id-creating-proper-interpreters-in-parrot-creating-proper-interpreters-in-parrot-span"><span id="Creating_'proper'_interpreters_in_Parrot">Creating &lsquo;proper&rsquo; interpreters in Parrot</span></h4>

<p>Simon Cozens wondered what was left to do to allow parrot to be embedded in an interpreter and have PIR fed directly to it. Leo pointed him at his own YAL.</p>

<p><a href="http://groups.google.com/groups?selm=87u136fzs2.fsf@alibi.simon-cozens.org">http://groups.google.com</a></p>

<p><a href="http://toetsch.at/yal/">http://toetsch.at/yal/</a> &ndash; Yet Another Language</p>

<h4 id="span-id-yield-op-yield-op-span"><span id="yield_op?"><code>yield</code> op?</span></h4>

<p>Michal Wallace was uncomfortable with the workings of Parrot Coroutines and posted a sample of parrot code which demonstrated why. Leo promised to fix it once he&rsquo;d applied Luke&rsquo;s Continuations patch.</p>

<p><a href="http://groups.google.com/groups?selm=Pine.LNX.4.58.0401090305540.21408@hydrogen.sabren.com">http://groups.google.com</a></p>

<h4 id="span-id-congratulations-dan-congratulations-dan-span"><span id="Congratulations_Dan">Congratulations Dan</span></h4>

<p>Melvin Smith offered his congratulations to Dan for the first commercial use of Parrot. I think I can safely say we all echo those congratulations.</p>

<p><a href="http://www.sidhe.org/~dan/blog/archives/000288.html">http://www.sidhe.org/~dan/blog/archives/000288.html</a></p>

<h3 id="span-id-meanwhile-in-perl6-language-meanwhile-in-perl6-language-span"><span id="Meanwhile_in_perl6-language">Meanwhile in perl6-language</span></h3>

<h4 id="span-id-roles-and-mix-ins-roles-and-mix-ins-span"><span id="Roles_and_Mix-ins">Roles and Mix-ins</span></h4>

<p>Discussion of roles as mix-ins kicked off again after the Christmas break. The canonical <code>Dog::bark</code> vs. <code>Tree::bark</code> problem was discussed.</p>

<p><a href="http://groups.google.com/groups?selm=20040105164608.GA69309@megazone.bigpanda.com">http://groups.google.com</a></p>

<h4 id="span-id-the-european-union-constitution-the-european-union-constitution-span"><span id="The_European_Union_Constitution">The European Union Constitution</span></h4>

<p>For reasons that still escape me various Americans paraded their ignorance about the putative constitution of a loose union of sovereign states.</p>

<h4 id="span-id-perl-6-story-cards-perl-6-story-cards-span"><span id="Perl_6_Story_Cards">Perl 6 Story Cards</span></h4>

<p>In last week&rsquo;s summary I mentioned the Perl 6 Stories Kwiki that Allison and chromatic set up some months ago and suggested that people wanting to write tests and stories for the new language take a look at it. It seems they did, and the Wiki&rsquo;s seen a good deal of activity. Check it out if you&rsquo;re interested in helping with the project.</p>

<p><a href="http://p6stories.kwiki.org/">http://p6stories.kwiki.org/</a></p>

<h4 id="span-id-a-modest-question-a-modest-question-span"><span id="A_modest_question">A modest question</span></h4>

<p>Austin Hastings asked the design team why they were fascinated with Traits (which will be called Roles in Perl 6). He&rsquo;d read the original paper and was unimpressed with the gains that were made by using them.</p>

<p>The awkwardly cased chromatic opened the case for Roles by pointing out that Roles allow for finer grained naming of chunks of functionality and code reuse. I must say I agree; I&rsquo;m always keen on opportunities to name something.</p>

<p><a href="http://groups.google.com/groups?selm=ICELKKFHGNOHCNCCCBKFMEDNCJAA.Austin_Hastings@Yahoo.com">http://groups.google.com</a></p>

<h3 id="span-id-announcement-announcement-span"><span id="Announcement">Announcement</span></h3>

<p>Iain &ldquo;Spoon&rdquo; Truskett was not a prolific contributor to the Perl 6 mailing lists. He was, however, an important contributor to these summaries every week; he was the maintainer of WWW::Shorten, the module that I use to shorten the URLs on the version of the summary that goes out to perl6-announce.</p>

<p>He died from a sudden cardiac arrest on the 29th of December. He was 24. He will be missed. This summary is dedicated to his memory.</p>

<p><a href="http://iain.truskett.id.au/">http://iain.truskett.id.au/</a> &ndash; Iain&rsquo;s website</p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/perl-6">perl-6</a></div>
                
                  <div class="tag"><a href="/tags/perl-6-internals-parrot">perl-6-internals-parrot</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-piers-cawley">
  <div class="col-sm-2">
    
    <a href="/authors/piers-cawley/"><div class="circle-avatar" style="background-image:url(/images/author/piers-cawley.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/piers-cawley/"><h3>Piers Cawley</h3></a>
    <p></p>
    <h5><a href="/authors/piers-cawley/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2004_01_p6pdigest_20040111.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

